set(PYBIND11_NEWPYTHON ON)
find_package(Python)
include(cmake/dependencies/PyBind11.cmake)
pybind11_add_module(onionpy bindings/python.cpp)
target_include_directories(onionpy PUBLIC ${ONIONPP_INSTALL_DIR}/include)
add_dependencies(onionpy onionpp-static)
target_link_libraries(onionpy PRIVATE onionpp-static pybind11::pybind11)
install(TARGETS onionpy LIBRARY DESTINATION . RENAME onionpp.so)
